# Configuración de Postfix a través de un relay host autenticado
<div style="margin-left: 40px;"><br /></div>
<table width="100%" rules="none" frame="void" border="0" style="border-style: none; background-image: none; float: none; text-align: left; vertical-align: top;"><tbody>
  <tr>
    <td width="100%" valign="top">
      <div> </div>
      <ul>
        <li style="text-align: left;"><font color="#000000"><font size="3"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Figura: cliente, Avatar, gmail</span></b></span></font></font></font></font></font></font></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top" style="border-style: none; border-width: 1px; background-image: none; text-align: left; vertical-align: top;">
      <div style="margin-left: 80px;"><img width="490" vspace="0" hspace="0" height="225" border="0" src="../img/correo$@SLASH@$Smarthost.jpeg" alt="Figura smarthost" title="Figura smarthost" /><br /></div>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top"> <style type="text/css"> &amp;amp;amp;amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;amp;amp;amp;gt; </style>
      <p lang="es-ES" align="justify" style="margin-left: 2.3cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">En la figura anterior se observa que el usuario envía correo vía SMTP usando Avatar como servidor de correo local.</span></span></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Avatar recibirá el mensaje. Si el destinatario es de un dominio externo, y está definido en la lista de dominios a reeenviar, no buscará el servidor de correo remoto directamente, sino que por el contrario dirigirá el mensaje al servidor smarthost.</span></span></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">En esta situación nuestro servidor local actuará de cliente SMTP.</span></span></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">En los ejercicios, nuestro servidor smarthost será gmail. Gmail pide autenticación a los usuarios (SASL) y ofrece un canal seguro mediante TLS.</span></span></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">En los siguientes apartados configuraremos Postfix para lograr este objetivo.</span></span></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2;" class="western"><font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><br /></span></span></font></font></font></font></p>
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2;" class="western"><font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"></span></span></font></font></font></font></p><hr style="width: 100%; height: 2px;" />
      <p lang="es-ES" align="justify" style="margin-left: 1.25cm; margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2;" class="western"><font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><br /></span></span></font></font></font></font></p>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top">
      <div style="text-align: left;"> <style type="text/css"> &amp;amp;amp;amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;amp;amp;amp;gt; </style> <style type="text/css"> &amp;amp;amp;amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;amp;amp;amp;gt; </style> </div>
      <ul>
        <li style="text-align: left;"> <font color="#000000"><font size="3"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Figura: Sistema de archivos</span></b></span></font></font></font></font></font></font></li>
      </ul>
    </td>
  </tr>
  <tr style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
    <td width="100%" valign="top"> <style type="text/css"> &amp;amp;amp;amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;amp;amp;amp;gt; </style>
      <p lang="es-ES" align="justify" style="margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2; margin-left: 80px;" class="western"> <font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Para tener una visión global de los ficheros a configurar, usa esta figura, destacándose en rojo aquellos que serán objeto de modificaciones.</span></span></font></font></font></p>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top">
      <div style="margin-left: 80px;"><img width="903" vspace="0" hspace="0" height="494" border="0" src="../img/correo$@SLASH@$FicherosSmarthost.jpeg" alt="Ficheros configuración smarthost" title="Ficheros configuración smarthost" /><br /></div>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top" rowspan="1"><br />
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top" rowspan="1">
      <ul>
        <li>
          <div style="text-align: left;"><font size="2"><span style="font-weight: bold;">Configuración</span>: sigue los pasos indicados en el ejercicio de este apartado<span style="font-style: italic; font-weight: bold;"> ( &quot;</span></font><font size="2" color="#000000"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><span style="font-style: italic;">Ejercicio: configuración; solución a los casos 3 y 5&quot;)</span>.</span></b></span></font></font></font></font></div>
          <p lang="es-ES" align="justify" style="margin-bottom: 0cm; font-style: normal; widows: 2; orphans: 2;" class="western"><font color="#000000"><font size="3"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"></span></b></span></font></font></font></font></font></font></p></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top"> <style type="text/css"> &amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;gt;</style><br /><hr style="width: 100%; height: 2px;" /><br />
      <ul>
        <li><font color="#000000"><font size="3"><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Sobre SASL y TLS</span></b></span></font></font></font></font></font></font></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top"> <style type="text/css"> &amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;gt; </style>
      <ul>
        <ul>
          <ul>
            <ul>
              <li>
                <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font color="#0000ff"><font color="#000000"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">SASL</span></b></span></font></font></font></p>
                <ul>
                  <ul>
                    <li style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">SASL son las siglas de </span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Simple Autenticación and Security Layer</span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">, un método para añadir soporte para la autenticación a protocolos basados en la conexión que ha sido estandarizado por la IETF (Internet Engineering Task Force). Se usa en servidores para manejar las peticiones de autenticación de los clientes. Para ello, el protocolo incluye un comando para identificar y autenticar un usuario contra un servidor y para, opcionalmente, negociar la protección de las subsiguientes interacciones del protocolo. Si se negocia su uso, una capa de seguridad es añadida entre el protocolo y la conexión.</span></span></font></font> <font size="2"><br /></font></p> </li>
                    <li style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Podemos encontrar información detallada de SASL en la página web <a href="https://www.ietf.org/mailman/listinfo/sasl">https://www.ietf.org/mailman/listinfo/sasl</a></span></span></font></font> <font size="2"><br /></font></p> </li>
                    <li>
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">A tener en cuenta en la configuración (apartado </span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">“</span></span></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span lang="es-ES"><i><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Ejercicio: configuración de ficheros; solución a los casos 3 y 5”</span></span></span></i></span></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">): </span></span></font></font> </p>
                      <ul>
                        <li style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                          <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Para que nuestro servidor Postfix reenvíe el correo a través de gmail debe autenticarse ante él. Gmail usa autenticación, y en concreto emplea los métodos PLAIN o LOGIN (Puedes verificarlo configurando una cuenta de gmail en Evolution y en la pestaña de “</span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Envío de correo” </span></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">pulsar el botón de “</span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Comprobar tipos soportados</span></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">”)</span></span></font></font></p> </li>
                        <li style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                          <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Estos métodos transmiten identificaciones y claves en forma prácticamente plana, es necesario emplear bien una conexión sobre SSL o bien TLS que es otra extensión a SMTP.</span></span></font></font></p> </li>
                        <li style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                          <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><span style="font-weight: bold;">Importante</span>: Debes comprobar que tienes instalado el paquete </span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"> </span></b></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">libsasl2-modules</span></b></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">, </span></span></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">el cual contiene la librería con los diferentes métodos de autenticación (nonymous, crammd5, digest5md5,login,plain,etc). Estas librerías deben estar instaladas en /usr/lib/sasl2</span></span></span></span></font></font></p> </li>
                        <li>
                          <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;"> <font size="2" color="#0000ff"><font color="#000000"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><span style="font-weight: bold;">Interesante</span>: La utilidad </span></span></span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">saslfinger</span></b></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"> te permitirá verificar la configuración de Postfix y SASL. Descarga: <span style="font-style: italic;">wget </span><a style="font-style: italic;" href="http://postfix.state-of-mind.de/patrick.koetter/saslfinger/saslfinger-1.0.3.tar.gz">http://postfix.state-of-mind.de/patrick.koetter/saslfinger/saslfinger-1.0.3.tar.gz</a><span style="font-style: italic;">.</span></span></span></span></span></font></font></p>
                          <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2; font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;"> <font size="2" color="#0000ff"><font color="#000000"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Se muestra un ejemplo de la salidad del comando “saslfinger -c” (se recomienda su lectura y prestar atención a las librerías en /usr/lib/sasl2 ):</span></span></span></span></font></font></p>
                          <ul>
                            <li><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><span style="font-style: italic;">saslfinger - postfix Cyrus sasl configuration Tue Apr 20 22:01:12 BST 2010</span></span></span></span></span></font></font></font></font><br /><font color="#0000ff"><font color="#000000"><font face="Times New Roman, serif"><font size="2"><span style="font-style: normal;"><span style="text-decoration: none;"><span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;"><span style="font-style: italic;">version: 1.0.2</span><br style="font-style: italic;" /><span style="font-style: italic;">mode: client-side SMTP AUTH</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- basics --</span><br style="font-style: italic;" /><span style="font-style: italic;">Postfix: 2.5.5</span><br style="font-style: italic;" /><span style="font-style: italic;">System: Debian GNU/Linux 5.0 \n \l</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- smtp is linked to --</span><br style="font-style: italic;" /><span style="font-style: italic;"> libsasl2.so.2 =&gt; /usr/lib/libsasl2.so.2 (0xb7d98000)</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- active SMTP AUTH and TLS parameters for smtp --</span><br style="font-style: italic;" /><span style="font-style: italic;">relayhost = [smtp.gmail.com]:587</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_sasl_auth_enable = yes</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_sasl_password_maps = hash:/etc/postfix/sasl/passwd</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_sasl_security_options = noanonymous</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_tls_CAfile = /etc/postfix/cacert.pem</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp_use_tls = yes</span><br style="font-style: italic;" /><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- listing of /usr/lib/sasl2 --</span><br style="font-style: italic;" /><span style="font-style: italic;">total 680</span><br style="font-style: italic;" /><span style="font-style: italic;">drwxr-xr-x 2 root root 4096 2010-04-20 18:51 .</span><br style="font-style: italic;" /><span style="font-style: italic;">drwxr-xr-x 42 root root 12288 2010-04-20 18:39 ..</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13476 2009-05-24 11:20 libanonymous.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 855 2009-05-24 11:20 libanonymous.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13016 2009-05-24 11:20 libanonymous.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13016 2009-05-24 11:20 libanonymous.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13016 2009-05-24 11:20 libanonymous.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 15814 2009-05-24 11:20 libcrammd5.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 841 2009-05-24 11:20 libcrammd5.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 15352 2009-05-24 11:20 libcrammd5.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 15352 2009-05-24 11:20 libcrammd5.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 15352 2009-05-24 11:20 libcrammd5.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 46420 2009-05-24 11:20 libdigestmd5.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 864 2009-05-24 11:20 libdigestmd5.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 43500 2009-05-24 11:20 libdigestmd5.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 43500 2009-05-24 11:20 libdigestmd5.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 43500 2009-05-24 11:20 libdigestmd5.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13650 2009-05-24 11:20 liblogin.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 835 2009-05-24 11:20 liblogin.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13460 2009-05-24 11:20 liblogin.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13460 2009-05-24 11:20 liblogin.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13460 2009-05-24 11:20 liblogin.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 29076 2009-05-24 11:20 libntlm.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 829 2009-05-24 11:20 libntlm.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 28532 2009-05-24 11:20 libntlm.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 28532 2009-05-24 11:20 libntlm.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 28532 2009-05-24 11:20 libntlm.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 13970 2009-05-24 11:20 libplain.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 835 2009-05-24 11:20 libplain.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 14036 2009-05-24 11:20 libplain.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 14036 2009-05-24 11:20 libplain.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 14036 2009-05-24 11:20 libplain.so.2.0.22</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 21710 2009-05-24 11:20 libsasldb.a</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 866 2009-05-24 11:20 libsasldb.la</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 18080 2009-05-24 11:20 libsasldb.so</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 18080 2009-05-24 11:20 libsasldb.so.2</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 18080 2009-05-24 11:20 libsasldb.so.2.0.22</span><br style="font-style: italic;" /><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- permissions for /etc/postfix/sasl/passwd --</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw------- 1 root root 51 2010-04-19 09:29 /etc/postfix/sasl/passwd</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- permissions for /etc/postfix/sasl/passwd.db --</span><br style="font-style: italic;" /><span style="font-style: italic;">-rw-r--r-- 1 root root 12288 2010-04-19 09:33 /etc/postfix/sasl/passwd.db</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">/etc/postfix/sasl/passwd.db is up to date.</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- active services in /etc/postfix/master.cf --</span><br style="font-style: italic;" /><span style="font-style: italic;"># service type private unpriv chroot wakeup maxproc command + args</span><br style="font-style: italic;" /><span style="font-style: italic;"># (yes) (yes) (yes) (never) (100)</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp inet n - - - - smtpd</span><br style="font-style: italic;" /><span style="font-style: italic;">pickup fifo n - - 60 1 pickup</span><br style="font-style: italic;" /><span style="font-style: italic;">cleanup unix n - - - 0 cleanup</span><br style="font-style: italic;" /><span style="font-style: italic;">qmgr fifo n - n 300 1 qmgr</span><br style="font-style: italic;" /><span style="font-style: italic;">tlsmgr unix - - - 1000? 1 tlsmgr</span><br style="font-style: italic;" /><span style="font-style: italic;">rewrite unix - - - - - trivial-rewrite</span><br style="font-style: italic;" /><span style="font-style: italic;">bounce unix - - - - 0 bounce</span><br style="font-style: italic;" /><span style="font-style: italic;">defer unix - - - - 0 bounce</span><br style="font-style: italic;" /><span style="font-style: italic;">trace unix - - - - 0 bounce</span><br style="font-style: italic;" /><span style="font-style: italic;">verify unix - - - - 1 verify</span><br style="font-style: italic;" /><span style="font-style: italic;">flush unix n - - 1000? 0 flush</span><br style="font-style: italic;" /><span style="font-style: italic;">proxymap unix - - n - - proxymap</span><br style="font-style: italic;" /><span style="font-style: italic;">proxywrite unix - - n - 1 proxymap</span><br style="font-style: italic;" /><span style="font-style: italic;">smtp unix - - - - - smtp</span><br style="font-style: italic;" /><span style="font-style: italic;">relay unix - - - - - smtp</span><br style="font-style: italic;" /><span style="font-style: italic;"> -o smtp_fallback_relay=</span><br style="font-style: italic;" /><span style="font-style: italic;">showq unix n - - - - showq</span><br style="font-style: italic;" /><span style="font-style: italic;">error unix - - - - - error</span><br style="font-style: italic;" /><span style="font-style: italic;">retry unix - - - - - error</span><br style="font-style: italic;" /><span style="font-style: italic;">discard unix - - - - - discard</span><br style="font-style: italic;" /><span style="font-style: italic;">local unix - n n - - local</span><br style="font-style: italic;" /><span style="font-style: italic;">virtual unix - n n - - virtual</span><br style="font-style: italic;" /><span style="font-style: italic;">lmtp unix - - - - - lmtp</span><br style="font-style: italic;" /><span style="font-style: italic;">anvil unix - - - - 1 anvil</span><br style="font-style: italic;" /><span style="font-style: italic;">scache unix - - - - 1 scache</span><br style="font-style: italic;" /><span style="font-style: italic;">maildrop unix - n n - - pipe</span><br style="font-style: italic;" /><span style="font-style: italic;"> flags=DRhu user=vmail argv=/usr/bin/maildrop -d ${recipient}</span><br style="font-style: italic;" /><span style="font-style: italic;">uucp unix - n n - - pipeflags=Fqhu user=uucp argv=uux -r -n -z -a$sender - $nexthop!rmail ($recipient)</span><br style="font-style: italic;" /><span style="font-style: italic;">ifmail unix - n n - - pipe</span><br style="font-style: italic;" /><span style="font-style: italic;"> flags=F user=ftn argv=/usr/lib/ifmail/ifmail -r $nexthop ($recipient)</span><br style="font-style: italic;" /><span style="font-style: italic;">bsmtp unix - n n - - pipe</span><br style="font-style: italic;" /><span style="font-style: italic;"> flags=Fq. user=bsmtp argv=/usr/lib/bsmtp/bsmtp -t$nexthop -f$sender $recipient</span><br style="font-style: italic;" /><span style="font-style: italic;">scalemail-backend unix - n n - 2 pipe</span><br style="font-style: italic;" /><span style="font-style: italic;"> flags=R user=scalemail argv=/usr/lib/scalemail/bin/scalemail-store ${nexthop} ${user} ${extension}</span><br style="font-style: italic;" /><span style="font-style: italic;">mailman unix - n n - - pipe</span><br style="font-style: italic;" /><span style="font-style: italic;"> flags=FR user=list argv=/usr/lib/mailman/bin/postfix-to-mailman.py</span><br style="font-style: italic;" /><span style="font-style: italic;"> ${nexthop} ${user}</span><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- mechanisms on [smtp.gmail.com]:587 --</span><br style="font-style: italic;" /><br style="font-style: italic;" /><br style="font-style: italic;" /><span style="font-style: italic;">-- end of saslfinger output --</span><br /><br /></span></span></span></span></font></font></font></font></li>
                          </ul> </li>
                      </ul> </li>
                  </ul>
                </ul> </li>
            </ul>
          </ul>
        </ul>
      </ul>
    </td>
  </tr>
  <tr>
    <td width="100%" valign="top"> <style type="text/css"> &amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;gt; </style>
      <ul>
        <ul>
          <ul>
            <ul>
              <li>
                <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font color="#0000ff"><font color="#000000"><font size="2"><span style="text-decoration: none;"><b><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">TLS</span></b></span></font></font></font><font color="#0000ff"><font color="#000000"><font size="2"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">.</span></span></font></font></font></p>
                <ul style="font-family: trebuchet ms,verdana,arial,helvetica,sans-serif;">
                  <ul>
                    <li>
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Por defecto, toda comunicación en Internet se hace sin ningún tipo de encriptación y sin una autenticación fiable. Esto significa que cualquiera con acceso físico a la línea de datos por la que viaja un paquete puede espiar dicha comunicación. Aún peor, es posible redirigir o alterar esa comunicación para que la información que se desea mandar se pierda y nadie se dé cuenta.</span></span></font></font></p> </li>
                    <li>
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">De cara a solventar estos problemas de seguridad, Netscape, Inc. introdujo el protocolo SSL (Secure Sockets Layer), que ha ido evolucionando en el protocolo estandarizado TLS (Transportation Layer Security). Ofrece tanto encriptación de la comunicación (frenando las escuchas) como autenticación fuerte (asegurando que ambas partes de una comunicación son correctamente identificadas y que la comunicación no puede ser alterada).</span></span></font></font></p> </li>
                    <li>
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Postfix/TLS no implementa el protocolo TLS por sí mismo, sino que usa el paquete OpenSSL para esta tarea. En la página de OpenSSL, </span></span></font></font><font size="2" color="#0000ff"><u><a href="http://www.openssl.org/"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">www.openssl.org</span></a></u></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">, pueden encontrarse enlaces a documentación que profundiza en el protocolo y sus características.</span></span></font></font></p> </li>
                    <li>
                      <p align="justify" class="western" style="margin-bottom: 0cm; widows: 2; orphans: 2;"> <font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">Comprueba con “</span></span></font></font><font size="2" color="#0000ff"><font color="#000000"><i><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">dpkg -l openssl</span></span></i></font></font><font size="2" color="#0000ff"><font color="#000000"><span style="text-decoration: none;"><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;">” que tienes instalado el paquete.</span></span></font></font></p> </li>
                  </ul>
                </ul> </li>
            </ul>
          </ul>
        </ul>
      </ul>
    </td>
  </tr></tbody>
</table> <style type="text/css"> &amp;amp;amp;amp;amp;amp;amp;lt;!-- @page { margin: 2cm } P { margin-bottom: 0.21cm } A:link { color: #0000ff } --&amp;amp;amp;amp;amp;amp;amp;gt; </style>
